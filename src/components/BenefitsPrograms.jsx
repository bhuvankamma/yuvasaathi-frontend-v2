import React, { useState, useMemo } from 'react';
import image1 from '../assets/image-1.png';
import image2 from '../assets/pmky.jpg';
import image3 from '../assets/kisan.jpg';
import image4 from '../assets/intern.png';
import image5 from '../assets/image-5.jpg';
import image6 from '../assets/image-6.jpg';
import image7 from '../assets/card.webp';
import image8 from '../assets/image-8.jpg';
import image9 from '../assets/yojana.webp';
import image10 from '../assets/water.jpg';
import image11 from '../assets/NSAP.jpg';
import image12 from '../assets/image-12.jpg';


// Real Bihar Govt links for programs
const govtLinks = {
  'Bihar Rojgar Mela (Job Fair)': 'https://ncs.gov.in/',
  'Pradhan Mantri Kaushal Vikas Yojana (PMKVY)': 'https://www.india.gov.in/pradhan-mantri-kaushal-vikas-yojana-pmkvy',
  'Bihar Krishi Anudan Yojana': 'https://dbtagriculture.bihar.gov.in/',
  'Student Internship Program': 'https://cag.gov.in/ag/bihar/hi/page-ag-bihar-student-internship-program',
  'Startup Bihar Policy': 'https://startup.bihar.gov.in/startup-recognition',
  'Jal Jeevan Hariyali Abhiyan': 'https://jaljeevanmission.gov.in/about_jjm',
  'Bihar Student Credit Card Scheme': 'https://www.myscheme.gov.in/schemes/bsccs',
  'Mukhya Mantri Kanya Utthan Yojana': 'https://ekalyan.bih.nic.in/kanyautthan.aspx',
  'Mukhyamantri Gram Parivahan Yojana': 'https://transport.bih.nic.in/RoadSafety/MGPY.html',
  'Har Ghar Nal Ka Jal': 'https://bvm.bihar.gov.in/submission/nc/nishchay-1-har-ghar-nal-ka-jal/',
  'National Social Assistance Programme': 'https://www.sspmis.bihar.gov.in/',
  'Bihar Rajya Fasal Sahayata Yojana': 'https://dbtagriculture.bihar.gov.in/PMFBY.aspx',
};

// Hindi translations for all text and program info
const translations = {
  hi: {
    sectionTitle: '‡§¨‡§ø‡§π‡§æ‡§∞ ‡§∏‡§∞‡§ï‡§æ‡§∞ ‡§ï‡•á ‡§≤‡§æ‡§≠ ‡§î‡§∞ ‡§ï‡§æ‡§∞‡•ç‡§Ø‡§ï‡•ç‡§∞‡§Æ',
    sectionDescription:
      '‡§ï‡•å‡§∂‡§≤ ‡§µ‡§ø‡§ï‡§æ‡§∏, ‡§∞‡•ã‡§ú‡§ó‡§æ‡§∞, ‡§î‡§∞ ‡§∏‡§æ‡§Æ‡§æ‡§ú‡§ø‡§ï ‡§ï‡§≤‡•ç‡§Ø‡§æ‡§£ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§¨‡§ø‡§π‡§æ‡§∞ ‡§∏‡§∞‡§ï‡§æ‡§∞ ‡§ï‡•Ä ‡§µ‡§ø‡§≠‡§ø‡§®‡•ç‡§® ‡§™‡§π‡§≤‡•ã‡§Ç ‡§î‡§∞ ‡§Ø‡•ã‡§ú‡§®‡§æ‡§ì‡§Ç ‡§ï‡§æ ‡§Ö‡§®‡•ç‡§µ‡•á‡§∑‡§£ ‡§ï‡§∞‡•á‡§Ç‡•§',
    searchPlaceholder: '‡§ï‡§æ‡§∞‡•ç‡§Ø‡§ï‡•ç‡§∞‡§Æ ‡§ñ‡•ã‡§ú‡•á‡§Ç...',
    filterAll: '‡§∏‡§≠‡•Ä',
    filterActive: '‡§∏‡§ï‡•ç‡§∞‡§ø‡§Ø',
    filterUpcoming: '‡§Ü‡§ó‡§æ‡§Æ‡•Ä',
    filterLive: '‡§≤‡§æ‡§á‡§µ',
    participants: '‡§™‡•ç‡§∞‡§§‡§ø‡§≠‡§æ‡§ó‡•Ä',
    statusLabels: {
      Active: '‡§∏‡§ï‡•ç‡§∞‡§ø‡§Ø',
      Upcoming: '‡§Ü‡§ó‡§æ‡§Æ‡•Ä',
      Live: '‡§≤‡§æ‡§á‡§µ',
      Default: '‡§∏‡•ç‡§•‡§ø‡§§‡§ø',
    },
    languageLabel: '‡§≠‡§æ‡§∑‡§æ',
    viewDetails: '‡§µ‡§ø‡§µ‡§∞‡§£ ‡§¶‡•á‡§ñ‡•á‡§Ç',
    noProgramsFound: '‡§ï‡•ã‡§à ‡§ï‡§æ‡§∞‡•ç‡§Ø‡§ï‡•ç‡§∞‡§Æ ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡§æ‡•§',
    viewMore: '‡§î‡§∞ ‡§¶‡•á‡§ñ‡•á‡§Ç',
    viewLess: '‡§ï‡§Æ ‡§¶‡•á‡§ñ‡•á‡§Ç',
    programs: {
      'Bihar Rojgar Mela (Job Fair)': {
        title: '‡§¨‡§ø‡§π‡§æ‡§∞ ‡§∞‡•ã‡§ú‡§ó‡§æ‡§∞ ‡§Æ‡•á‡§≤‡§æ (‡§®‡•å‡§ï‡§∞‡•Ä ‡§Æ‡•á‡§≤‡§æ)',
        description:
          '‡§®‡•å‡§ï‡§∞‡•Ä ‡§ö‡§æ‡§π‡§®‡•á ‡§µ‡§æ‡§≤‡•ã‡§Ç ‡§ï‡•ã ‡§µ‡§ø‡§≠‡§ø‡§®‡•ç‡§® ‡§â‡§¶‡•ç‡§Ø‡•ã‡§ó‡•ã‡§Ç ‡§∏‡•á ‡§ú‡•ã‡§°‡§º‡§®‡§æ‡•§ ‡§®‡§ø‡§Ø‡§Æ‡§ø‡§§ ‡§®‡•å‡§ï‡§∞‡•Ä ‡§Æ‡•á‡§≤‡•á ‡§ú‡§ø‡§≤‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§Ü‡§Ø‡•ã‡§ú‡§ø‡§§ ‡§ï‡§ø‡§è ‡§ú‡§æ‡§§‡•á ‡§π‡•à‡§Ç‡•§',
      },
      'Pradhan Mantri Kaushal Vikas Yojana (PMKVY)': {
        title: '‡§™‡•ç‡§∞‡§ß‡§æ‡§®‡§Æ‡§Ç‡§§‡•ç‡§∞‡•Ä ‡§ï‡•å‡§∂‡§≤ ‡§µ‡§ø‡§ï‡§æ‡§∏ ‡§Ø‡•ã‡§ú‡§®‡§æ (‡§™‡•Ä‡§è‡§Æ‡§ï‡•á‡§µ‡•Ä‡§µ‡§æ‡§à)',
        description:
          '‡§Ø‡•Å‡§µ‡§æ‡§ì‡§Ç ‡§ï‡•ã ‡§â‡§¶‡•ç‡§Ø‡•ã‡§ó-‡§∏‡§Ç‡§¨‡§Ç‡§ß‡§ø‡§§ ‡§ï‡•å‡§∂‡§≤ ‡§™‡•ç‡§∞‡§∂‡§ø‡§ï‡•ç‡§∑‡§£ ‡§≤‡•á‡§®‡•á ‡§Æ‡•á‡§Ç ‡§∏‡§ï‡•ç‡§∑‡§Æ ‡§¨‡§®‡§æ‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ï‡•å‡§∂‡§≤ ‡§™‡•ç‡§∞‡§Æ‡§æ‡§£‡•Ä‡§ï‡§∞‡§£ ‡§Ø‡•ã‡§ú‡§®‡§æ‡•§',
      },
      'Bihar Krishi Anudan Yojana': {
        title: '‡§¨‡§ø‡§π‡§æ‡§∞ ‡§ï‡•É‡§∑‡§ø ‡§Ö‡§®‡•Å‡§¶‡§æ‡§® ‡§Ø‡•ã‡§ú‡§®‡§æ',
        description:
          '‡§Ü‡§ß‡•Å‡§®‡§ø‡§ï ‡§ï‡•É‡§∑‡§ø ‡§™‡§¶‡•ç‡§ß‡§§‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ï‡§ø‡§∏‡§æ‡§®‡•ã‡§Ç ‡§ï‡•ã ‡§∏‡§¨‡•ç‡§∏‡§ø‡§°‡•Ä ‡§î‡§∞ ‡§∏‡§π‡§æ‡§Ø‡§§‡§æ ‡§™‡•ç‡§∞‡§¶‡§æ‡§® ‡§ï‡§∞‡§®‡§æ‡•§',
      },
      'Student Internship Program': {
        title: '‡§õ‡§æ‡§§‡•ç‡§∞ ‡§á‡§Ç‡§ü‡§∞‡•ç‡§®‡§∂‡§ø‡§™ ‡§ï‡§æ‡§∞‡•ç‡§Ø‡§ï‡•ç‡§∞‡§Æ',
        description:
          '‡§õ‡§æ‡§§‡•ç‡§∞‡•ã‡§Ç ‡§ï‡•ã ‡§∏‡§∞‡§ï‡§æ‡§∞‡•Ä ‡§µ‡§ø‡§≠‡§æ‡§ó‡•ã‡§Ç ‡§î‡§∞ ‡§∏‡§æ‡§∞‡•ç‡§µ‡§ú‡§®‡§ø‡§ï ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞ ‡§ï‡•á ‡§â‡§™‡§ï‡•ç‡§∞‡§Æ‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§µ‡•ç‡§Ø‡§æ‡§µ‡§π‡§æ‡§∞‡§ø‡§ï ‡§Ö‡§®‡•Å‡§≠‡§µ ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§Ö‡§µ‡§∏‡§∞‡•§',
      },
      'Startup Bihar Policy': {
        title: '‡§∏‡•ç‡§ü‡§æ‡§∞‡•ç‡§ü‡§Ö‡§™ ‡§¨‡§ø‡§π‡§æ‡§∞ ‡§®‡•Ä‡§§‡§ø',
        description:
          '‡§â‡§≠‡§∞‡§§‡•á ‡§â‡§¶‡•ç‡§Ø‡§Æ‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•ã ‡§ß‡§® ‡§î‡§∞ ‡§™‡§∞‡§æ‡§Æ‡§∞‡•ç‡§∂ ‡§ï‡•á ‡§∏‡§æ‡§• ‡§™‡•ç‡§∞‡•ã‡§§‡•ç‡§∏‡§æ‡§π‡§ø‡§§ ‡§î‡§∞ ‡§∏‡§Æ‡§∞‡•ç‡§•‡§® ‡§ï‡§∞‡§®‡§æ‡•§',
      },
      'Jal Jeevan Hariyali Abhiyan': {
        title: '‡§ú‡§≤ ‡§ú‡•Ä‡§µ‡§® ‡§π‡§∞‡§ø‡§Ø‡§æ‡§≤‡•Ä ‡§Ö‡§≠‡§ø‡§Ø‡§æ‡§®',
        description:
          '‡§ú‡§≤ ‡§∏‡§Ç‡§∞‡§ï‡•ç‡§∑‡§£ ‡§î‡§∞ ‡§π‡§∞‡§ø‡§Ø‡§æ‡§≤‡•Ä ‡§ï‡•ã ‡§¨‡§¢‡§º‡§æ‡§µ‡§æ ‡§¶‡•á‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§è‡§ï ‡§¨‡§°‡§º‡§æ ‡§Ö‡§≠‡§ø‡§Ø‡§æ‡§®‡•§',
      },
      'Bihar Student Credit Card Scheme': {
        title: '‡§¨‡§ø‡§π‡§æ‡§∞ ‡§∏‡•ç‡§ü‡•Ç‡§°‡•á‡§Ç‡§ü ‡§ï‡•ç‡§∞‡•á‡§°‡§ø‡§ü ‡§ï‡§æ‡§∞‡•ç‡§° ‡§Ø‡•ã‡§ú‡§®‡§æ',
        description:
          '‡§õ‡§æ‡§§‡•ç‡§∞‡•ã‡§Ç ‡§ï‡•ã ‡§â‡§ö‡•ç‡§ö ‡§∂‡§ø‡§ï‡•ç‡§∑‡§æ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§µ‡§ø‡§§‡•ç‡§§‡•Ä‡§Ø ‡§∏‡§π‡§æ‡§Ø‡§§‡§æ, ‡§§‡§æ‡§ï‡§ø ‡§µ‡•á ‡§Ö‡§™‡§®‡•á ‡§∏‡§™‡§®‡•ã‡§Ç ‡§ï‡•ã ‡§™‡•Ç‡§∞‡§æ ‡§ï‡§∞ ‡§∏‡§ï‡•á‡§Ç‡•§',
      },
      'Mukhya Mantri Kanya Utthan Yojana': {
        title: '‡§Æ‡•Å‡§ñ‡•ç‡§Ø‡§Æ‡§Ç‡§§‡•ç‡§∞‡•Ä ‡§ï‡§®‡•ç‡§Ø‡§æ ‡§â‡§§‡•ç‡§•‡§æ‡§® ‡§Ø‡•ã‡§ú‡§®‡§æ',
        description:
          '‡§ú‡§®‡•ç‡§Æ ‡§∏‡•á ‡§∏‡•ç‡§®‡§æ‡§§‡§ï ‡§§‡§ï ‡§Æ‡§π‡§ø‡§≤‡§æ ‡§∂‡§ø‡§ï‡•ç‡§∑‡§æ ‡§î‡§∞ ‡§∏‡§æ‡§Æ‡§æ‡§ú‡§ø‡§ï ‡§ï‡§≤‡•ç‡§Ø‡§æ‡§£ ‡§ï‡•ã ‡§¨‡§¢‡§º‡§æ‡§µ‡§æ ‡§¶‡•á‡§®‡•á ‡§µ‡§æ‡§≤‡•Ä ‡§è‡§ï ‡§Ø‡•ã‡§ú‡§®‡§æ‡•§',
      },
      'Mukhyaministri Gram Parivahan Yojana': {
        title: '‡§Æ‡•Å‡§ñ‡•ç‡§Ø‡§Æ‡§Ç‡§§‡•ç‡§∞‡•Ä ‡§ó‡•ç‡§∞‡§æ‡§Æ ‡§™‡§∞‡§ø‡§µ‡§π‡§® ‡§Ø‡•ã‡§ú‡§®‡§æ',
        description:
          '‡§ó‡•ç‡§∞‡§æ‡§Æ‡•Ä‡§£ ‡§ï‡§®‡•á‡§ï‡•ç‡§ü‡§ø‡§µ‡§ø‡§ü‡•Ä ‡§Æ‡•á‡§Ç ‡§∏‡•Å‡§ß‡§æ‡§∞ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§¨‡•á‡§∞‡•ã‡§ú‡§ó‡§æ‡§∞ ‡§Ø‡•Å‡§µ‡§æ‡§ì‡§Ç ‡§ï‡•ã ‡§µ‡§æ‡§π‡§® ‡§ñ‡§∞‡•Ä‡§¶‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§∞‡§ø‡§Ø‡§æ‡§Ø‡§§‡•Ä ‡§ã‡§£ ‡§™‡•ç‡§∞‡§¶‡§æ‡§® ‡§ï‡§∞‡§®‡§æ‡•§',
      },
      'Har Ghar Nal Ka Jal': {
        title: '‡§π‡§∞ ‡§ò‡§∞ ‡§®‡§≤ ‡§ï‡§æ ‡§ú‡§≤',
        description:
          '‡§¨‡§ø‡§π‡§æ‡§∞ ‡§ï‡•á ‡§π‡§∞ ‡§ò‡§∞ ‡§Æ‡•á‡§Ç ‡§™‡§æ‡§á‡§™ ‡§∏‡•á ‡§™‡•Ä‡§®‡•á ‡§ï‡§æ ‡§™‡§æ‡§®‡•Ä ‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§ï‡§∞‡§æ‡§®‡•á ‡§ï‡§æ ‡§è‡§ï ‡§™‡•ç‡§∞‡§Æ‡•Å‡§ñ ‡§ï‡§æ‡§∞‡•ç‡§Ø‡§ï‡•ç‡§∞‡§Æ‡•§',
      },
      'National Social Assistance Programme': {
        title: '‡§∞‡§æ‡§∑‡•ç‡§ü‡•ç‡§∞‡•Ä‡§Ø ‡§∏‡§æ‡§Æ‡§æ‡§ú‡§ø‡§ï ‡§∏‡§π‡§æ‡§Ø‡§§‡§æ ‡§ï‡§æ‡§∞‡•ç‡§Ø‡§ï‡•ç‡§∞‡§Æ',
        description:
          '‡§µ‡•É‡§¶‡•ç‡§ß‡§æ‡§µ‡§∏‡•ç‡§•‡§æ ‡§™‡•á‡§Ç‡§∂‡§®, ‡§µ‡§ø‡§ß‡§µ‡§æ ‡§™‡•á‡§Ç‡§∂‡§® ‡§î‡§∞ ‡§µ‡§ø‡§ï‡§≤‡§æ‡§Ç‡§ó‡§§‡§æ ‡§≤‡§æ‡§≠ ‡§∏‡§π‡§ø‡§§ ‡§µ‡§ø‡§≠‡§ø‡§®‡•ç‡§® ‡§∏‡§æ‡§Æ‡§æ‡§ú‡§ø‡§ï ‡§™‡•á‡§Ç‡§∂‡§® ‡§™‡•ç‡§∞‡§¶‡§æ‡§® ‡§ï‡§∞‡§®‡§æ‡•§',
      },
      'Bihar Rajya Fasal Sahayata Yojana': {
        title: '‡§¨‡§ø‡§π‡§æ‡§∞ ‡§∞‡§æ‡§ú‡•ç‡§Ø ‡§´‡§∏‡§≤ ‡§∏‡§π‡§æ‡§Ø‡§§‡§æ ‡§Ø‡•ã‡§ú‡§®‡§æ',
        description:
          '‡§™‡•ç‡§∞‡§æ‡§ï‡•É‡§§‡§ø‡§ï ‡§Ü‡§™‡§¶‡§æ‡§ì‡§Ç ‡§ï‡•á ‡§ï‡§æ‡§∞‡§£ ‡§´‡§∏‡§≤ ‡§ï‡•ç‡§∑‡§§‡§ø ‡§∏‡•á ‡§™‡•Ä‡§°‡§º‡§ø‡§§ ‡§ï‡§ø‡§∏‡§æ‡§®‡•ã‡§Ç ‡§ï‡•ã ‡§µ‡§ø‡§§‡•ç‡§§‡•Ä‡§Ø ‡§∏‡§π‡§æ‡§Ø‡§§‡§æ ‡§™‡•ç‡§∞‡§¶‡§æ‡§® ‡§ï‡§∞‡§®‡§æ‡•§',
      },
    },
  },
  en: {
    sectionTitle: 'Current Benefits & Programs',
    sectionDescription:
      'Explore the various government initiatives and schemes designed to empower citizens with skill development, employment, and social welfare support.',
    searchPlaceholder: 'Search programs...',
    filterAll: 'All',
    filterActive: 'Active',
    filterUpcoming: 'Upcoming',
    filterLive: 'Live',
    participants: 'Participants',
    statusLabels: {
      Active: 'Active',
      Upcoming: 'Upcoming',
      Live: 'Live',
      Default: 'Status',
    },
    languageLabel: 'Language',
    viewDetails: 'View Details',
    noProgramsFound: 'No programs found.',
    viewMore: 'View More',
    viewLess: 'View Less',
    programs: {}, // English already exists in the initial data
  },
};

const initialPrograms = [
  {
    id: 1,
    title: 'Bihar Rojgar Mela (Job Fair)',
    description:
      'Connecting job seekers with various industries. Regular job fairs held across districts.',
    detailsLink: '#',
    status: 'Active',
    icon: 'üíº',
    image: image1,
    participants: 12000,
    progress: 75,
  },
  {
    id: 2,
    title: 'Pradhan Mantri Kaushal Vikas Yojana (PMKVY)',
    description:
      'Skill certification scheme to enable youth to take up industry-relevant skill training.',
    detailsLink: '#',
    status: 'Active',
    icon: 'üéì',
    image: image2,
    participants: 9500,
    progress: 60,
  },
  {
    id: 3,
    title: 'Bihar Krishi Anudan Yojana',
    description:
      'Providing subsidies and support to farmers for modern agricultural practices.',
    detailsLink: '#',
    status: 'Upcoming',
    icon: 'üöú',
    image: image3,
    participants: 0,
    progress: 0,
  },
  {
    id: 4,
    title: 'Student Internship Program',
    description:
      'Opportunities for students to gain practical experience in government departments and PSUs.',
    detailsLink: '#',
    status: 'Active',
    icon: 'üìö',
    image: image4,
    participants: 3500,
    progress: 50,
  },
  {
    id: 5,
    title: 'Startup Bihar Policy',
    description:
      'Incentivizing and supporting budding entrepreneurs with funding and mentorship.',
    detailsLink: '#',
    status: 'Active',
    icon: 'üöÄ',
    image: image5,
    participants: 1800,
    progress: 40,
  },
  {
    id: 6,
    title: 'Jal Jeevan Hariyali Abhiyan',
    description:
      'A massive campaign for water conservation and greenery promotion.',
    detailsLink: '#',
    status: 'Active',
    icon: 'üíß',
    image: image6,
    participants: 25000,
    progress: 85,
  },
  {
    id: 7,
    title: 'Bihar Student Credit Card Scheme',
    description:
      'Financial assistance to students for higher education, enabling them to pursue their dreams.',
    detailsLink: '#',
    status: 'Active',
    icon: 'üí≥',
    image: image7,
    participants: 45000,
    progress: 90,
  },
  {
    id: 8,
    title: 'Mukhya Mantri Kanya Utthan Yojana',
    description:
      'A scheme to promote female education and social welfare from birth to graduation.',
    detailsLink: '#',
    status: 'Active',
    icon: 'üëß',
    image: image8,
    participants: 60000,
    progress: 80,
  },
  {
    id: 9,
    title: 'Mukhyamantri Gram Parivahan Yojana',
    description:
      'Providing subsidized loans to unemployed youth for purchasing vehicles to improve rural connectivity.',
    detailsLink: '#',
    status: 'Upcoming',
    icon: 'üöê',
    image: image9,
    participants: 0,
    progress: 0,
  },
  {
    id: 10,
    title: 'Har Ghar Nal Ka Jal',
    description:
      'A flagship program to provide piped drinking water to every household in Bihar.',
    detailsLink: '#',
    status: 'Live',
    icon: 'üö∞',
    image: image10,
    participants: 15000,
    progress: 10,
  },
  {
    id: 11,
    title: 'National Social Assistance Programme',
    description: 'Providing various social pensions, including old age pension, widow pension, and disability benefits.',
    detailsLink: '#',
    status: 'Active',
    icon: 'üëµ',
    image: image11,
    participants: 150000,
    progress: 95,
  },
  {
    id: 12,
    title: 'Bihar Rajya Fasal Sahayata Yojana',
    description: 'Providing financial assistance to farmers who suffer crop losses due to natural calamities.',
    detailsLink: '#',
    status: 'Active',
    icon: 'üåæ',
    image: image12,
    participants: 40000,
    progress: 70,
  },
];

const statusColors = {
  Active: 'bg-green-500',
  Upcoming: 'bg-blue-500',
  Live: 'bg-red-500',
  Default: 'bg-gray-400',
};

// Number of programs to show initially
const PROGRAMS_TO_SHOW = 6;

// This component now receives props for language management
const BenefitsPrograms = ({ language, setLanguage }) => {
  const [searchTerm, setSearchTerm] = useState('');
  const [filterStatus, setFilterStatus] = useState('All');
  const [visibleProgramsCount, setVisibleProgramsCount] = useState(PROGRAMS_TO_SHOW);

  // Filter and search programs dynamically
  const filteredPrograms = useMemo(() => {
    return initialPrograms.filter((p) => {
      // Check both English and Hindi versions for search
      const title = translations[language].programs[p.title]?.title || p.title;
      const description = translations[language].programs[p.title]?.description || p.description;

      const matchesSearch =
        p.title.toLowerCase().includes(searchTerm.toLowerCase()) ||
        description.toLowerCase().includes(searchTerm.toLowerCase()) ||
        title.toLowerCase().includes(searchTerm.toLowerCase());

      const matchesStatus =
        filterStatus === 'All' || p.status === filterStatus;
      return matchesSearch && matchesStatus;
    });
  }, [searchTerm, filterStatus, language]);

  const displayedPrograms = filteredPrograms.slice(0, visibleProgramsCount);
  const showViewMore = filteredPrograms.length > visibleProgramsCount && visibleProgramsCount === PROGRAMS_TO_SHOW;
  const showViewLess = visibleProgramsCount > PROGRAMS_TO_SHOW && filteredPrograms.length > PROGRAMS_TO_SHOW;

  // Translate text helper
  const t = (key) => {
    return translations[language][key] || key;
  };

  const getTranslatedProgram = (program) => {
    return translations[language].programs[program.title] || {
      title: program.title,
      description: program.description
    };
  };

  // Get real govt link if available, else fallback
  const getProgramLink = (title, fallback) => {
    return govtLinks[title] || fallback || '#';
  };

  const handleViewMore = () => {
    setVisibleProgramsCount(initialPrograms.length);
  };

  const handleViewLess = () => {
    setVisibleProgramsCount(PROGRAMS_TO_SHOW);
  };

  return (
    <div className="min-h-screen p-4 sm:p-8 bg-gradient-to-br from-cyan-500 via-blue-500 to-purple-600 font-sans text-white">
      <div className="max-w-7xl mx-auto">
        {/* Language toggle buttons - now using the setLanguage prop */}
        <div className="flex justify-end mb-8 gap-2 items-center">
          <button
            onClick={() => setLanguage('hi')}
            className={`font-semibold px-4 py-1 rounded-full border-2 border-white transition-all transform hover:scale-105 shadow-md ${
              language === 'hi'
                ? 'bg-white text-blue-800'
                : 'bg-transparent text-white'
            }`}
          >
            HI
          </button>
          <button
            onClick={() => setLanguage('en')}
            className={`font-semibold px-4 py-1 rounded-full border-2 border-white transition-all transform hover:scale-105 shadow-md ${
              language === 'en'
                ? 'bg-white text-blue-800'
                : 'bg-transparent text-white'
            }`}
          >
            EN
          </button>
        </div>

        {/* Title and description */}
        <header className="text-center mb-12">
          <h1 className="text-4xl sm:text-5xl font-extrabold mb-4 text-white leading-tight tracking-tight">
            {t('sectionTitle')}
          </h1>
          <p className="text-lg sm:text-xl text-white max-w-2xl mx-auto leading-relaxed opacity-90">
            {t('sectionDescription')}
          </p>
        </header>

        {/* Search and filter */}
        <div className="flex flex-col sm:flex-row gap-4 justify-center mb-10">
          <input
            type="search"
            placeholder={t('searchPlaceholder')}
            value={searchTerm}
            onChange={(e) => setSearchTerm(e.target.value)}
            className="p-3 text-lg rounded-full border-2 border-white w-full max-w-xs transition-shadow focus:outline-none focus:ring-4 focus:ring-white shadow-lg bg-gray-50 text-gray-800"
            aria-label={t('searchPlaceholder')}
          />
          <select
            value={filterStatus}
            onChange={(e) => setFilterStatus(e.target.value)}
            className="p-3 text-lg rounded-full border-2 border-white w-full max-w-[150px] cursor-pointer transition-shadow focus:outline-none focus:ring-4 focus:ring-white shadow-lg bg-gray-50 text-gray-800"
            aria-label="Filter by status"
          >
            <option value="All">{t('filterAll')}</option>
            <option value="Active">{t('filterActive')}</option>
            <option value="Upcoming">{t('filterUpcoming')}</option>
            <option value="Live">{t('filterLive')}</option>
          </select>
        </div>

        {/* Programs grid */}
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
          {displayedPrograms.length === 0 ? (
            <p className="col-span-full text-center text-xl text-white opacity-80">
              {t('noProgramsFound')}
            </p>
          ) : (
            displayedPrograms.map((program) => {
              const statusColorClass = statusColors[program.status] || statusColors.Default;
              const link = getProgramLink(program.title, program.detailsLink);
              const translated = getTranslatedProgram(program);

              return (
                <article
                  key={program.id}
                  tabIndex={0}
                  className="rounded-3xl shadow-xl p-6 flex flex-col transition-all transform hover:-translate-y-2 hover:shadow-2xl cursor-pointer ring-4 ring-transparent hover:ring-fuchsia-400 focus:outline-none focus:ring-4 focus:ring-fuchsia-500 relative overflow-hidden text-white min-h-[350px] bg-transparent"
                  aria-label={`${translated.title} - ${t('statusLabels')[program.status]}`}
                  onClick={() => window.open(link, '_blank', 'noopener')}
                  onKeyDown={(e) => {
                    if (e.key === 'Enter' || e.key === ' ') {
                      window.open(link, '_blank', 'noopener');
                    }
                  }}
                >
                  {/* Background image and overlay container */}
                  <div 
                      className="absolute inset-0 z-0 rounded-3xl"
                      style={{
                          backgroundImage: `linear-gradient(rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.4)), url(${program.image})`,
                          backgroundSize: 'cover',
                          backgroundPosition: 'center',
                          backgroundRepeat: 'no-repeat',
                      }}
                  ></div>

                  {/* Content container with higher z-index */}
                  <div className="relative z-10 flex flex-col h-full">
                    <div className="flex items-start mb-5">
                      <span className="text-4xl mr-4 flex-shrink-0 animate-bounce-once">
                        {program.icon}
                      </span>
                      <div className="flex-grow">
                        <h2 className="text-2xl font-bold mb-1 leading-tight">
                          {translated.title}
                        </h2>
                        <span className={`px-4 py-1.5 rounded-full font-bold text-sm text-white ${statusColorClass} shadow-md`}>
                          {t('statusLabels')[program.status] || t('statusLabels').Default}
                        </span>
                      </div>
                    </div>
                    <p className="text-base flex-grow mb-4 min-h-[60px]">
                      {translated.description}
                    </p>
                    <div className="mb-4">
                      <div className="w-full bg-indigo-200 rounded-full h-2.5 overflow-hidden shadow-inner">
                        <div
                          className="bg-indigo-600 h-2.5 rounded-full transition-all duration-500 ease-out"
                          style={{ width: `${program.progress}%` }}
                        ></div>
                      </div>
                      <small className="font-bold text-indigo-200 text-xs mt-1 block">
                        {t('participants')}: {program.participants.toLocaleString()}
                      </small>
                    </div>
                    <a
                      href={link}
                      target="_blank"
                      rel="noopener"
                      className="mt-auto inline-block text-center bg-teal-600 text-white font-bold py-2 px-6 rounded-full transition-all transform hover:scale-105 hover:bg-teal-700 shadow-lg focus:outline-none focus:ring-4 focus:ring-teal-300 text-base"
                      onClick={(e) => e.stopPropagation()}
                    >
                      {t('viewDetails')}
                    </a>
                  </div>
                </article>
              );
            })
          )}
        </div>
        {(showViewMore || showViewLess) && (
          <div className="flex justify-center mt-12">
            {showViewMore && (
              <button
                onClick={handleViewMore}
                className="bg-indigo-600 text-white font-bold py-2 px-6 rounded-full text-base shadow-xl transition-all transform hover:scale-105 hover:bg-indigo-700 focus:outline-none focus:ring-4 focus:ring-indigo-300"
              >
                {t('viewMore')}
              </button>
            )}
            {showViewLess && (
              <button
                onClick={handleViewLess}
                className="bg-gray-700 text-white font-bold py-2 px-6 rounded-full text-base shadow-xl transition-all transform hover:scale-105 hover:bg-gray-800 focus:outline-none focus:ring-4 focus:ring-gray-500 ml-4"
              >
                {t('viewLess')}
              </button>
            )}
          </div>
        )}
      </div>
    </div>
  );
};

// Main App component that handles the global language state
const App = () => {
  const [language, setLanguage] = useState('hi');

  return <BenefitsPrograms language={language} setLanguage={setLanguage} />;
};

export default App;